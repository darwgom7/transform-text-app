<mat-card class="container">
  <div  class="input-header">
    <h2>Text Transformer</h2>
    <button mat-icon-button (click)="clearAll()" aria-label="Clear input">
      <mat-icon>cleaning_services</mat-icon>
    </button>
  </div>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Enter your text</mat-label>
    <textarea
      matInput
      [(ngModel)]="inputText"
      rows="6"
      (input)="transformText()"
    ></textarea>
  </mat-form-field>

  <div class="options">
    <mat-form-field appearance="fill" class="option-field">
      <mat-label>Sort</mat-label>
      <mat-select [(ngModel)]="sortOrder" (selectionChange)="transformText()">
        <mat-option value="none">None</mat-option>
        <mat-option value="asc">Ascending</mat-option>
        <mat-option value="desc">Descending</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill" class="option-field">
      <mat-label>Text format</mat-label>
      <mat-select [(ngModel)]="textFormat" (selectionChange)="transformText()">
        <mat-option value="none">None</mat-option>
        <mat-option value="uppercase">UPPERCASE</mat-option>
        <mat-option value="lowercase">lowercase</mat-option>
        <mat-option value="capitalize">Capitalize</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <mat-checkbox [(ngModel)]="removeDuplicates" (change)="transformText()">
    Remove duplicates <span *ngIf="!removeDuplicates && duplicateCount > 0" class="duplicate-count">({{ duplicateCount }})</span>
  </mat-checkbox>

  <mat-card class="output">
    <div class="output-header">
      <h3>Result <span *ngIf="resultCount > 0" class="result-count">({{ resultCount }})</span></h3>
      <button mat-icon-button (click)="copyToClipboard()" aria-label="Copy result">
        <mat-icon>content_copy</mat-icon>
      </button>
    </div>
    <div class="output-list">
      <ng-container *ngFor="let line of transformedText.split('\n'); let i = index">
        <div class="output-line" *ngIf="line.trim()">
          <span class="line-number">{{ i + 1 }}.</span>
          <span class="line-content">{{ line }}</span>
        </div>
      </ng-container>
    </div>
  </mat-card>
</mat-card>
